<mah:MetroWindow x:Class="bagpipe.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:bagpipe"
        mc:Ignorable="d"
        Title="Bagpipe" Height="500" Width="400" MinWidth="300" MinHeight="400">

    <Window.Resources>
        <local:Int32SettingConverter x:Key="Int32SettingConverter"/>
        <local:Int64SettingConverter x:Key="Int64SettingConverter"/>
        <local:FloatSettingConverter x:Key="FloatSettingConverter"/>
        <local:ByteSettingConverter x:Key="ByteSettingConverter"/>
        <local:SettingsTypeTemplateSelector x:Key="SettingsTypeTemplateSelector" />
        
        <DataTemplate x:Key="EmptySettingsTemplate">
            <TextBlock>Empty</TextBlock>
        </DataTemplate>
        <DataTemplate x:Key="Int32SettingsTemplate">
            <mah:NumericUpDown Minimum="-2147483648"
                               Maximum="2147483647"
                               Value="{Binding Value, Converter={StaticResource Int32SettingConverter}}"
                               NumericInputMode="Numbers"
                               ParsingNumberStyle="Integer,AllowThousands" />
        </DataTemplate>
        <DataTemplate x:Key="Int64SettingsTemplate">
            <mah:NumericUpDown Minimum="-9223372036854775808"
                               Maximum="9223372036854775807"
                               Value="{Binding Value, Converter={StaticResource Int64SettingConverter}}"
                               NumericInputMode="Numbers"
                               ParsingNumberStyle="Integer,AllowThousands" />
        </DataTemplate>
        <DataTemplate x:Key="DoubleSettingsTemplate">
            <mah:NumericUpDown Value="{Binding Value}"
                               NumericInputMode="Decimal"
                               ParsingNumberStyle="Number" />
        </DataTemplate>
        <DataTemplate x:Key="StringSettingsTemplate">
            <TextBox Text="{Binding Value}" />
        </DataTemplate>
        <DataTemplate x:Key="FloatSettingsTemplate">
            <mah:NumericUpDown Minimum="-3.40282347E+38"
                               Maximum="3.40282347E+38"
                               Value="{Binding Value, Converter={StaticResource FloatSettingConverter}}"
                               NumericInputMode="Decimal"
                               ParsingNumberStyle="Number" />
        </DataTemplate>
        <DataTemplate x:Key="DateTimeSettingsTemplate">
            <!-- TODO: this probably needs a converter -->
            <mah:DateTimePicker DisplayDate="{Binding Value}" />
        </DataTemplate>
        <DataTemplate x:Key="ByteSettingsTemplate">
            <mah:NumericUpDown Minimum="0"
                               Maximum="255"
                               Value="{Binding Value, Converter={StaticResource ByteSettingConverter}}"
                               NumericInputMode="Numbers"
                               ParsingNumberStyle="Integer,AllowThousands" />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <mah:MetroAnimatedTabControl>
            <TabItem Header="Raw">
                <ListView ItemsSource="{Binding}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="ID"
                                            DisplayMemberBinding="{Binding ID}" />
                            <GridViewColumn Header="Value"
                                            CellTemplateSelector="{StaticResource SettingsTypeTemplateSelector}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </TabItem>
            <TabItem Header="tmp">
                <Grid>
                    <mah:NumericUpDown Minimum="0" Maximum="100" Value="50" ParsingNumberStyle="Integer" NumericInputMode="Decimal"/>
                    
                </Grid>
            </TabItem>
        </mah:MetroAnimatedTabControl>
    </Grid>
</mah:MetroWindow>
